import React, { useEffect, useState } from "react";
import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
import { faTicket } from "@fortawesome/free-solid-svg-icons";
import "../../styles/pages/exploitation.scss";
import Sidebar from "../../components/Sidebar";
import exploitationAPI from "../../services/exploitationAPI";

const Exploitation = () => {
  const [exploitationData, setExploitationData] = useState(null);

  useEffect(() => {
    exploitationAPI().then((res) => {
      setExploitationData(res);
      console.log(res);
    });
  }, []);

  return (
    <>
      <Sidebar />

      {exploitationData && (
        <div id="exploitation">
          <div className="wrap_single">
            <div className="cube1"></div>
            <div className="cube2">
              <div className="arrow_top"></div>
              <p className="commerciale">Commerciale</p>
              <h2>Taux de contrôle</h2>
              <FontAwesomeIcon icon={faTicket} className="icon" />
              <p>{exploitationData.tauxControle} %</p>
              <button className="btn-voir">en voir plus...</button>
            </div>
            <div className="cube3"></div>
            <div className="cube4">
              <div className="arrow_left"></div>
              <p className="achat">Achat</p>
              <h2>Accidents corporels</h2>
              <FontAwesomeIcon icon={faTicket} className="icon" />
              <div className="text_damier">
                <p>{exploitationData.nbAccidentsCorporels}</p>
                <button className="btn-voir">en voir plus...</button>
              </div>
            </div>
            <div className="cube5">
              <h2>Date : </h2>
              <input type="date" id="start" name="trip-start" />
            </div>
            <div className="cube6">
              <div className="arrow_right"></div>
              <p className="environnement">Environnement</p>
              <h2>Accidents matériel</h2>
              <FontAwesomeIcon icon={faTicket} className="icon" />
              <p>{exploitationData.nbAccidentsMateriels}</p>
              <button className="btn-voir">en voir plus...</button>
            </div>
            <div className="cube7"></div>
            <div className="cube8">
              <div className="arrow_down"></div>
              <p className="ressources">Ressources humaines</p>
              <h2>Cause principale des accidents</h2>
              <FontAwesomeIcon icon={faTicket} className="icon" />
              <p>{exploitationData.causeAccident}</p>
              <button className="btn-voir">en voir plus...</button>
            </div>
            <div className="cube9"></div>
          </div>
        </div>
      )}
    </>
  );
};

export default Exploitation;
