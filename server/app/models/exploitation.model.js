const mongoose = require("mongoose");
const Schema = mongoose.Schema;

const ExploitationTauxRecouvrement = new Schema({

    tauxRecouvrementNbNumPV:{
        type:Number
    },
    tauxRecouvrementTotalAmendePaye:{
        type:Number
    }
})

const ExploitationTauxFraudeTauxControle = new Schema({

    fraudeControleClientControle:{
        type:Number
    },
    fraudeControleValidation:{
        type:String
    },
    fraudeControleTotalAmendes:{
        type:Number
    }
})

const ExploitationAccidentologieKm = new Schema({
    accidentologieKmLigne:{
        type:String
    },
    accidentologieKmRealise:{
        type:Number
    },
    accidentologieKmCategorie2:{
        type:String
    }

})

const ExploitationAccidentologieReferenceDossier = new Schema({
    accidentologieReferenceDossier:{
        type:String
    },
    accidentologieMode:{
        type:String
    },
    accidentologieLigne:{
        type:String
    }


})

const ExploitationSchema = new Schema({
  nbAccidentsMateriels: {
    type: Number
  },
  nbAccidentsCorporels: {
    type: Number
  },
  causeAccident: {
    type: String
  },
  tauxControle: {
    type: Number
  },
  accidentologieReferenceDossier: [{
    type:ExploitationAccidentologieReferenceDossier
  }],
  tauxRecouvrement:[{
    type:ExploitationTauxRecouvrement
  }],
  tauxFraudeTauxControle:[{
    type:ExploitationTauxFraudeTauxControle
  }],
  accidentologieKm: [{
    type:ExploitationAccidentologieKm
  }],

  dataDate: {
    type: Date
  }
});



module.exports = mongoose.model("Exploitation", ExploitationSchema);
